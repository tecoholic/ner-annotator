(function(){"use strict";var e={3158:function(e,t,n){var o=n(5102),s=n(9269),a=n(3201);function l(e,t,n,l,r,i){const c=(0,s.up)("menu-bar"),u=(0,s.up)("annotation-sidebar"),d=(0,s.up)("q-drawer"),p=(0,s.up)("start-page"),m=(0,s.up)("annotation-page"),h=(0,s.up)("q-page-container"),g=(0,s.up)("q-layout"),f=(0,s.up)("drag-n-drop-overlay"),k=(0,s.up)("exit-dialog");return(0,s.wg)(),(0,s.iD)("div",{class:"fullscreen",style:{"overflow-y":"scroll"},onDragover:t[3]||(t[3]=(0,o.iM)(((...e)=>i.onDragEnter&&i.onDragEnter(...e)),["prevent"])),onDragenter:t[4]||(t[4]=(...e)=>i.onDragEnter&&i.onDragEnter(...e)),onDragleave:t[5]||(t[5]=(0,o.iM)(((...e)=>i.onDragLeave&&i.onDragLeave(...e)),["self"])),onDrop:t[6]||(t[6]=(0,o.iM)(((...e)=>i.onDrop&&i.onDrop(...e)),["stop","prevent"]))},[(0,s._)("div",{style:(0,a.j5)({"pointer-events":r.overlayActive?"none":"auto"})},[(0,s.Wm)(g,{view:"hHh lpR fFf"},{default:(0,s.w5)((()=>["start"!==r.currentPage?((0,s.wg)(),(0,s.j4)(c,{key:0})):(0,s.kq)("",!0),(0,s.Wm)(d,{"model-value":"start"!==r.currentPage,bordered:"",class:(0,a.C_)(e.$q.dark.isActive?"bg-dark":"bg-grey-2")},{default:(0,s.w5)((()=>[(0,s.Wm)(u)])),_:1},8,["model-value","class"]),(0,s.Wm)(h,null,{default:(0,s.w5)((()=>["start"===r.currentPage?((0,s.wg)(),(0,s.j4)(p,{key:0,onFileLoaded:t[0]||(t[0]=e=>i.switchToPage("annotate"))})):(0,s.kq)("",!0),"annotate"===r.currentPage?((0,s.wg)(),(0,s.j4)(m,{key:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(f,{style:(0,a.j5)({visibility:r.overlayActive&&null==r.pendingFileDrop?"visible":"hidden"})},null,8,["style"]),(0,s.Wm)(k,{show:null!=r.pendingFileDrop&&"start"!=r.currentPage,onHide:t[1]||(t[1]=e=>r.pendingFileDrop=null),onConfirm:t[2]||(t[2]=e=>i.processFileDrop())},null,8,["show"])],4)],32)}var r="data:image/png;base64,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";const i={class:"q-pa-sm q-pl-md row items-center"},c=(0,s._)("img",{src:r},null,-1),u=(0,s._)("span",{class:"q-ml-sm"},[(0,s._)("strong",null," NER Annotator ")],-1),d={class:"q-ml-md cursor-pointer non-selectable"},p=(0,s._)("span",null," File ",-1),m={class:"q-ml-md cursor-pointer non-selectable"},h=(0,s._)("span",null," Annotations ",-1),g={class:"q-ml-md cursor-pointer non-selectable"},f=(0,s._)("span",null," Tags ",-1),k={class:"q-ml-md cursor-pointer non-selectable"},w=(0,s._)("span",null,"Help",-1),y=(0,s._)("div",{class:"text-h6"}," Project Name ",-1);function b(e,t,n,a,l,r){const b=(0,s.up)("q-avatar"),v=(0,s.up)("q-item-section"),C=(0,s.up)("q-item"),x=(0,s.up)("q-list"),A=(0,s.up)("q-menu"),S=(0,s.up)("export-annotations"),_=(0,s.up)("q-space"),q=(0,s.up)("q-icon"),W=(0,s.up)("q-separator"),Z=(0,s.up)("about-dialog"),D=(0,s.up)("q-header"),I=(0,s.up)("q-card-section"),U=(0,s.up)("q-input"),T=(0,s.up)("q-btn"),P=(0,s.up)("q-card-actions"),E=(0,s.up)("q-card"),j=(0,s.up)("q-dialog"),N=(0,s.up)("exit-dialog"),O=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(D,{bordered:""},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s._)("div",null,[(0,s.Wm)(b,{size:"xs"},{default:(0,s.w5)((()=>[c])),_:1}),u]),(0,s._)("div",d,[p,(0,s.Wm)(A,{style:{"border-radius":"0.5rem"}},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)(C,{clickable:"",onClick:t[1]||(t[1]=t=>e.pendingClick=e.$refs.file)},{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Open File")])),_:1}),(0,s._)("input",{ref:"file",type:"file",accept:".txt",style:{display:"none"},onChange:t[0]||(t[0]=(...e)=>r.openFile&&r.openFile(...e))},null,544)])),_:1})),[[O]])])),_:1})])),_:1})]),(0,s._)("div",m,[h,(0,s.Wm)(A,{style:{"border-radius":"0.5rem"}},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(S),(0,s.wy)(((0,s.wg)(),(0,s.j4)(C,{clickable:"",onClick:t[3]||(t[3]=t=>e.pendingClick=e.$refs.file)},{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Import")])),_:1}),(0,s._)("input",{ref:"file",type:"file",accept:".json",style:{display:"none"},onChange:t[2]||(t[2]=(...e)=>r.importAnnotations&&r.importAnnotations(...e))},null,544)])),_:1})),[[O]])])),_:1})])),_:1})]),(0,s._)("div",g,[f,(0,s.Wm)(A,{style:{"border-radius":"0.5rem"}},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)(C,{clickable:"",onClick:t[4]||(t[4]=e=>r.exportTags())},{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Export")])),_:1})])),_:1})),[[O]]),(0,s.wy)(((0,s.wg)(),(0,s.j4)(C,{clickable:"",onClick:t[6]||(t[6]=t=>e.$refs.file.click())},{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Import")])),_:1}),(0,s._)("input",{ref:"file",type:"file",accept:".json",style:{display:"none"},onChange:t[5]||(t[5]=(...e)=>r.importTags&&r.importTags(...e))},null,544)])),_:1})),[[O]])])),_:1})])),_:1})]),(0,s.Wm)(_),(0,s.Wm)(q,{style:{"margin-top":"5px"},color:"white",name:e.$q.dark.isActive?"fas fa-sun":"fas fa-moon",class:"cursor-pointer",onClick:r.toggleDarkMode},null,8,["name","onClick"]),(0,s._)("div",k,[w,(0,s.Wm)(A,{style:{"border-radius":"0.5rem"}},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)(C,{clickable:"",href:"https://github.com/tecoholic/ner-annotator/discussions",target:"_blank"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" Forum ")])),_:1})])),_:1})),[[O]]),(0,s.wy)(((0,s.wg)(),(0,s.j4)(C,{clickable:"",href:"https://github.com/tecoholic/ner-annotator/issues",target:"_blank"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Report Issue ")])),_:1})),[[O]]),(0,s.Wm)(W),(0,s.wy)(((0,s.wg)(),(0,s.j4)(C,{clickable:"",onClick:t[7]||(t[7]=t=>e.showAbout=!0)},{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Uk)("About")])),_:1})])),_:1})),[[O]])])),_:1})])),_:1}),(0,s.Wm)(Z,{show:e.showAbout,onHide:t[8]||(t[8]=t=>e.showAbout=!1)},null,8,["show"])])])])),_:1}),(0,s.Wm)(j,{modelValue:e.promptForProject,"onUpdate:modelValue":t[11]||(t[11]=t=>e.promptForProject=t),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{style:{"min-width":"350px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[y])),_:1}),(0,s.Wm)(I,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{modelValue:e.newProjectName,"onUpdate:modelValue":t[9]||(t[9]=t=>e.newProjectName=t),dense:"",autofocus:"",onKeyup:t[10]||(t[10]=(0,o.D2)((t=>e.promptForProject=!1),["enter"]))},null,8,["modelValue"])])),_:1}),(0,s.Wm)(P,{align:"right",class:"text-primary"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(T,{flat:"",label:"Cancel"},null,512),[[O]]),(0,s.wy)((0,s.Wm)(T,{flat:"",label:"Create Project"},null,512),[[O]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(N,{show:null!=e.pendingClick,onHide:t[12]||(t[12]=t=>e.pendingClick=null),onConfirm:t[13]||(t[13]=t=>e.pendingClick.click())},null,8,["show"])],64)}function v(e,t,n,o,a,l){const r=(0,s.up)("q-item-section"),i=(0,s.up)("q-item"),c=(0,s.Q2)("close-popup");return(0,s.wy)(((0,s.wg)(),(0,s.j4)(i,{clickable:"",onClick:t[0]||(t[0]=e=>l.generateJSONExport())},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Export")])),_:1})])),_:1})),[[c]])}var C=n(6957),x=n(5007),A=n(5997),S=n(5512);const _=async(e,t)=>{if("undefined"===typeof window.rpc){let n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}else(0,x.a1)({defaultPath:await(0,S.Kc)(),filters:[{extensions:["json"],name:"JSON Files (*.json)"},{name:"All files (*.*)",extensions:["*"]}]}).then((t=>{t&&(t.match(/.*\.json$/)||(t+=".json"),(0,A.dw)("save_file",{filepath:t,contents:e}).then((e=>alert(e))).catch((e=>alert(e))))})).catch((()=>{}))};var q={name:"ExportAnnotations",computed:{...(0,C.rn)(["annotations","classes"])},methods:{async generateJSONExport(){const e={classes:this.classes.map((e=>e.name)),annotations:this.annotations.map((e=>[e.text,{entities:e.entities}]))},t=JSON.stringify(e);await _(t,"annotations.json")}}},W=n(7617),Z=n(5246),D=n(2278),I=n(8819),U=n(1410),T=n.n(U);const P=(0,W.Z)(q,[["render",v]]);var E=P;T()(q,"components",{QItem:Z.Z,QItemSection:D.Z}),T()(q,"directives",{ClosePopup:I.Z});var j=n(5999);const N=(0,s._)("div",{class:"text-h6"}," NER Annotator ",-1),O=(0,s._)("strong",null,"Version: ",-1),B=(0,s._)("p",null,[(0,s._)("strong",null,"Source: "),(0,s._)("a",{href:"https://github.com/tecoholic/ner-annotator"}," Github Repository ")],-1),Q=(0,s._)("p",null,[(0,s._)("strong",null,"Author:"),(0,s.Uk)(" @tecoholic ("),(0,s._)("a",{href:"https://github.com/tecoholic"},"Github"),(0,s.Uk)(", "),(0,s._)("a",{href:"https://github.com/tecoholic"},"Twitter"),(0,s.Uk)(") ")],-1);function R(e,t,n,o,l,r){const i=(0,s.up)("q-card-section"),c=(0,s.up)("q-btn"),u=(0,s.up)("q-card-actions"),d=(0,s.up)("q-card"),p=(0,s.up)("q-dialog"),m=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(p,{"model-value":n.show,onHide:t[0]||(t[0]=t=>e.$emit("hide"))},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{style:{"min-width":"400px",padding:"10px","border-radius":"10px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(i,null,{default:(0,s.w5)((()=>[N])),_:1}),(0,s.Wm)(i,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s._)("p",null,[O,(0,s.Uk)((0,a.zw)(e.version),1)]),B,Q])),_:1}),(0,s.Wm)(u,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[m]])])),_:1})])),_:1})])),_:1},8,["model-value"])}var F={name:"AboutDialog",props:{show:{type:Boolean,default:!1}},emits:["hide"],data:function(){return{version:"1.4.0"}}},L=n(9833),H=n(8055),K=n(9501),z=n(4333),V=n(4686);const M=(0,W.Z)(F,[["render",R]]);var Y=M;T()(F,"components",{QDialog:L.Z,QCard:H.Z,QCardSection:K.Z,QCardActions:z.Z,QBtn:V.Z}),T()(F,"directives",{ClosePopup:I.Z});const J=(0,s._)("div",{class:"text-h5"}," Are you sure you want to close this file? ",-1),G=(0,s._)("p",null,"All changes made to this file will be lost.",-1);function $(e,t,n,o,a,l){const r=(0,s.up)("q-card-section"),i=(0,s.up)("q-btn"),c=(0,s.up)("q-card-actions"),u=(0,s.up)("q-card"),d=(0,s.up)("q-dialog"),p=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(d,{"model-value":n.show,onHide:t[2]||(t[2]=t=>e.$emit("hide"))},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{style:{"max-width":"400px",padding:"10px","border-radius":"10px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[J])),_:1}),(0,s.Wm)(r,{class:"text-body1"},{default:(0,s.w5)((()=>[G,(0,s.Uk)(" If you haven't exported the annotations, please do so before closing the file. ")])),_:1}),(0,s.Wm)(c,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(i,{flat:"",label:"Cancel",color:"red",onClick:t[0]||(t[0]=t=>e.$emit("hide"))},null,512),[[p]]),(0,s.wy)((0,s.Wm)(i,{flat:"",label:"OK",color:"light-blue",onClick:t[1]||(t[1]=t=>e.$emit("confirm"))},null,512),[[p]])])),_:1})])),_:1})])),_:1},8,["model-value"])}var X={name:"ExitDialog",props:{show:{type:Boolean,default:!1}},emits:["hide","confirm"]};const ee=(0,W.Z)(X,[["render",$]]);var te=ee;T()(X,"components",{QDialog:L.Z,QCard:H.Z,QCardSection:K.Z,QCardActions:z.Z,QBtn:V.Z}),T()(X,"directives",{ClosePopup:I.Z});var ne={name:"MenuBar",components:{ExportAnnotations:E,AboutDialog:Y,ExitDialog:te},setup(){const e=(0,j.Z)();return{notify(t,n,o){e.notify({icon:t,message:n,color:o,position:"top",timeout:2e3,actions:[{label:"Dismiss",color:"white"}]})}}},data:function(){return{promptForProject:!1,newProjectName:"",showAbout:!1,pendingClick:null}},computed:{...(0,C.rn)(["annotations","classes"])},methods:{...(0,C.OI)(["loadClasses","loadAnnotations","setInputSentences","clearAllAnnotations","resetIndex"]),exportTags:async function(){await _(JSON.stringify(this.classes),"tags.json")},importTags:function(e){let t=e.target.files[0],n=new FileReader;n.onload=t=>{try{this.loadClasses(JSON.parse(t.target.result)),this.notify("fa fa-check",`${this.classes.length} Tags imported successfully`,"positive")}catch(e){this.notify("fas fa-exclamation-circle","Invalid file","red-6")}},n.readAsText(t)},openFile:function(e){let t=e.target.files[0],n=new FileReader;n.onload=e=>{this.setInputSentences(e.target.result),this.clearAllAnnotations()},n.readAsText(t),this.resetIndex()},importAnnotations:function(e){let t=e.target.files[0],n=new FileReader;n.onload=t=>{try{this.loadAnnotations(JSON.parse(t.target.result)),this.notify("fa fa-check","Annotations imported successfully","positive")}catch(e){this.notify("fas fa-exclamation-circle","Invalid file","red-6")}},n.readAsText(t)},toggleDarkMode:function(){this.$q.dark.toggle()}}},oe=n(7454),se=n(9393),ae=n(2952),le=n(2146),re=n(4492),ie=n(3139),ce=n(4633),ue=n(6053);const de=(0,W.Z)(ne,[["render",b]]);var pe=de;T()(ne,"components",{QHeader:oe.Z,QAvatar:se.Z,QMenu:ae.Z,QList:le.Z,QItem:Z.Z,QItemSection:D.Z,QSeparator:re.Z,QSpace:ie.Z,QIcon:ce.Z,QDialog:L.Z,QCard:H.Z,QCardSection:K.Z,QInput:ue.Z,QCardActions:z.Z,QBtn:V.Z}),T()(ne,"directives",{ClosePopup:I.Z});var me=n.p+"img/step-1.4f5d4ae3.png",he=n.p+"img/step-2.ada325d3.png",ge=n.p+"img/step-3.7e65646c.png";const fe={class:"q-mx-auto q-my-xl",style:{"max-width":"600px"}},ke=(0,s._)("h5",{class:"text-h4 q-mb-sm"}," NER Text Annotator ",-1),we={class:"q-my-xl q-py-md",style:{"margin-top":"7rem"}},ye={class:"q-mx-auto",style:{"max-width":"600px"}},be=(0,s._)("h4",{class:"text-h4"}," How to use the NER Annotator? ",-1),ve=(0,s._)("p",{class:"text-subtitle1 q-my-md"}," Tips to prepare the text file ",-1),Ce=(0,s._)("ul",null,[(0,s._)("li",null,"Break your content in paragraphs or passages"),(0,s._)("li",null,[(0,s.Uk)(" Maintain a consistent seperator between the passages. "),(0,s._)("br"),(0,s.Uk)(" Eg., newline, empty line or a text seperator like "),(0,s._)("code",null,"---")]),(0,s._)("li",null," For large datasets, break the text into smaller files and tag them seperately ")],-1),xe=(0,s._)("ul",{class:"q-my-md"},[(0,s._)("li",null,[(0,s.Uk)("Use the "),(0,s._)("strong",null,"New Tag"),(0,s.Uk)(" button to create new tags")]),(0,s._)("li",null,[(0,s.Uk)(" Use the "),(0,s._)("strong",null,"Edit Tag"),(0,s.Uk)(" button to remove unwanted tags ")]),(0,s._)("li",null,[(0,s.Uk)(" Click the "),(0,s._)("strong",null,"Save"),(0,s.Uk)(" button once you are done annotating an entry and to move to the next one ")]),(0,s._)("li",null,[(0,s.Uk)(" Adjust the "),(0,s._)("strong",null,"Text Seperator"),(0,s.Uk)(" break your content correctly into entries ")]),(0,s._)("li",null,[(0,s.Uk)(" Use the "),(0,s._)("strong",null,"Tags"),(0,s.Uk)(" menu to Export/Import tags to share with your team ")])],-1);function Ae(e,t,n,o,l,r){const i=(0,s.up)("q-icon"),c=(0,s.up)("q-file"),u=(0,s.up)("q-separator"),d=(0,s.up)("q-img"),p=(0,s.up)("q-timeline-entry"),m=(0,s.up)("q-timeline");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(i,{name:e.$q.dark.isActive?"fas fa-sun":"fas fa-moon",class:(0,a.C_)([e.$q.dark.isActive?"text-white":"text-black","cursor-pointer fixed-top-right q-mx-xl q-my-lg text-h5"]),onClick:r.toggleDarkMode},null,8,["name","class","onClick"]),(0,s._)("div",fe,[ke,(0,s._)("p",{class:(0,a.C_)(["text-subtitle1",e.$q.dark.isActive?"text-grey-4":"text-grey-7"])}," Annotate text for spaCy NER Model training ",2),(0,s._)("div",we,[(0,s.Wm)(c,{modelValue:l.textFile,"onUpdate:modelValue":[t[0]||(t[0]=e=>l.textFile=e),r.onFileSelected],accept:".txt",filled:"",label:"Open a text file to begin","bg-color":e.$q.dark.isActive?"black-1":"light-blue-1",onRejected:r.fileSelectionError},{prepend:(0,s.w5)((()=>[(0,s.Wm)(i,{name:"fas fa-upload"})])),_:1},8,["modelValue","bg-color","onRejected","onUpdate:modelValue"]),(0,s._)("p",{class:(0,a.C_)(["text-subtitle1 q-my-md",e.$q.dark.isActive?"text-grey-4":"text-grey-7"])}," Hint: You can also drag and drop files into this window! ",2)])]),(0,s.Wm)(u),(0,s._)("div",{class:(0,a.C_)([e.$q.dark.isActive?"bg-dark":"bg-grey-1","q-pa-lg"])},[(0,s._)("div",ye,[be,(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{subtitle:"Step 1",title:"Load your text file with contents to annotate",icon:"fa fa-upload",color:"yellow-8"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{src:me,"spinner-color":"white",class:"rounded-borders",style:{border:"1px solid #ccc",width:"80%"}}),ve,Ce])),_:1}),(0,s.Wm)(p,{subtitle:"Step 2",title:"Create some tags and start tagging your text",icon:"fa fa-tag",color:"orange-6"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{src:he,"spinner-color":"white",class:"rounded-borders",style:{border:"1px solid #ccc"}}),xe])),_:1}),(0,s.Wm)(p,{subtitle:"Step 3",title:"Download your annotations as a JSON file that can be used for training",icon:"fa fa-download",color:"red-6"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{src:ge,"spinner-color":"white",class:"rounded-borders",style:{border:"1px solid #ccc",width:"70%"}})])),_:1}),(0,s.Wm)(p,{subtitle:"Finally",title:"Convert to DocBin format and use it for training",icon:"fa fa-file",color:"red-10"},{default:(0,s.w5)((()=>[(0,s._)("p",null,[(0,s.Uk)(" See the spaCy documentation "),(0,s._)("a",{class:(0,a.C_)(e.$q.dark.isActive?"text-light-blue-4":"text-dark-blue"),href:"https://spacy.io/api/data-formats#json-input"}," here ",2),(0,s.Uk)(" on how to convert the annotations from JSON to DocBin format. ")])])),_:1})])),_:1})])],2)],64)}var Se={name:"StartPage",emits:["file-loaded"],data(){return{textFile:null}},methods:{...(0,C.OI)(["setInputSentences"]),onFileSelected(e){try{let t=new FileReader;t.addEventListener("load",(e=>{this.setInputSentences(e.target.result),this.$emit("file-loaded")})),t.readAsText(e)}catch(t){this.fileSelectionError()}},fileSelectionError(){this.$q.notify({icon:"fas fa-exclamation-circle",message:"Invalid file",color:"red-6",position:"top",timeout:2e3,actions:[{label:"Dismiss",color:"white"}]})},toggleDarkMode(){this.$q.dark.toggle()}}},_e=n(6967),qe=n(8173),We=n(3884),Ze=n(4711);const De=(0,W.Z)(Se,[["render",Ae]]);var Ie=De;T()(Se,"components",{QIcon:ce.Z,QFile:_e.Z,QSeparator:re.Z,QTimeline:qe.Z,QTimelineEntry:We.Z,QImg:Ze.Z});const Ue={class:"q-pa-lg",style:{height:"60vh","overflow-y":"scroll"}},Te={class:"q-pa-md",style:{"border-top":"1px solid #ccc"}};function Pe(e,t,n,o,a,l){const r=(0,s.up)("classes-block"),i=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(r),(0,s._)("div",Ue,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.tm.tokens,(e=>((0,s.wg)(),(0,s.j4)((0,s.LL)("token"===e.type?"Token":"TokenBlock"),{id:"t"+e.start,key:e.start,token:e,"background-color":e.backgroundColor,onRemoveBlock:l.onRemoveBlock},null,40,["id","token","background-color","onRemoveBlock"])))),128))]),(0,s._)("div",Te,[(0,s.Wm)(i,{color:"red",outline:"",class:"q-mx-sm",label:"Reset",onClick:l.resetBlocks},null,8,["onClick"]),(0,s.Wm)(i,{class:"q-mx-sm",color:e.$q.dark.isActive?"grey-3":"grey-9",outline:"",disabled:0==e.currentIndex,label:"Back",onClick:l.backOneSentence},null,8,["color","disabled","onClick"]),(0,s.Wm)(i,{class:"q-mx-sm",color:e.$q.dark.isActive?"grey-3":"grey-9",outline:"",label:"Skip",onClick:l.skipCurrentSentence},null,8,["color","onClick"]),(0,s.Wm)(i,{class:"q-mx-sm",color:"green-7",outline:"",label:"Save",onClick:l.saveTags},null,8,["onClick"])])])}n(121);const Ee=["id"];function je(e,t,n,o,l,r){return"token"===n.token.type?((0,s.wg)(),(0,s.iD)("span",{key:0,id:"t"+n.token.start,class:"token",style:(0,a.j5)({padding:"char"==e.$store.state.annotationPrecision?"0.25rem 0rem":"0.25rem"})},(0,a.zw)(" "==n.token.text?"Â ":n.token.text),13,Ee)):(0,s.kq)("",!0)}var Ne={name:"Token",props:{token:{type:Object,required:!0}}};const Oe=(0,W.Z)(Ne,[["render",je]]);var Be=Oe;const Qe={class:"tag"};function Re(e,t,n,o,l,r){const i=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)("mark",{class:(0,a.C_)("bg-"+n.backgroundColor)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.token.tokens,(e=>((0,s.wg)(),(0,s.j4)((0,s.LL)("Token"),{id:"t"+e.start,key:e.start,token:e},null,8,["id","token"])))),128)),(0,s._)("span",Qe,[(0,s.Uk)((0,a.zw)(n.token.label)+" ",1),(0,s.Wm)(i,{icon:"fa fa-times-circle",round:"",flat:"",size:"xs","text-color":"grey-7",onClick:t[0]||(t[0]=t=>e.$emit("remove-block",n.token.start))})])],2)}var Fe={name:"TokenBlock",components:{Token:Be},props:{token:{type:Object,requried:!0},backgroundColor:{type:String,required:!1}},emits:["remove-block"],data:function(){return{showClose:!1}}};const Le=(0,W.Z)(Fe,[["render",Re]]);var He=Le;T()(Fe,"components",{QBtn:V.Z});const Ke={class:"q-pa-md",style:{"border-bottom":"1px solid #ccc"}},ze={class:"row"},Ve={class:"tags"},Me={class:"q-mx-md"},Ye={class:"buttons"};function Je(e,t,n,o,l,r){const i=(0,s.up)("q-avatar"),c=(0,s.up)("q-chip"),u=(0,s.up)("q-space"),d=(0,s.up)("q-btn"),p=(0,s.up)("q-input");return(0,s.wg)(),(0,s.iD)("div",Ke,[(0,s._)("div",ze,[(0,s._)("div",Ve,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.classes,((t,n)=>((0,s.wg)(),(0,s.j4)(c,{key:t.id,outline:"",square:"",style:{height:"2rem"},color:t.color.replace("11","12"),clickable:"",removable:l.showDeleteButtons,onClick:t=>e.setCurrentClass(n),onRemove:e=>r.handleRemoveClass(t.id,t.name)},{default:(0,s.w5)((()=>[t.id===e.currentClass.id?((0,s.wg)(),(0,s.j4)(i,{key:0,color:t.color.replace("11","12"),style:{height:"2rem"},"text-color":"white",icon:"fa fa-check"},null,8,["color"])):(0,s.kq)("",!0),t.id!==e.currentClass.id?((0,s.wg)(),(0,s.j4)(i,{key:1,color:t.color.replace("11","12"),style:{height:"2rem"},"text-color":"white","font-size":"16px"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(n+1),1)])),_:2},1032,["color"])):(0,s.kq)("",!0),(0,s._)("p",{class:(0,a.C_)(["q-mb-none",e.$q.dark.isActive?"text-grey-3":"text-grey-9"])},(0,a.zw)(t.name),3)])),_:2},1032,["color","removable","onClick","onRemove"])))),128))]),(0,s.Wm)(u),(0,s._)("div",Me,[l.showNewClassInput||0===e.classes.length?((0,s.wg)(),(0,s.j4)(p,{key:0,modelValue:l.newClassName,"onUpdate:modelValue":t[1]||(t[1]=e=>l.newClassName=e),"bottom-slots":"",hint:"Enter a NER Tag and click [+] to add it",dense:"",autofocus:""},{append:(0,s.w5)((()=>[(0,s.Wm)(d,{round:"",dense:"",flat:"",color:"green-4",icon:"fa fa-plus",onClick:r.saveNewClass},null,8,["onClick"]),(0,s.Wm)(d,{round:"",color:"red-4",dense:"",flat:"",icon:"fa fa-times",onClick:t[0]||(t[0]=e=>l.showNewClassInput=!1)})])),_:1},8,["modelValue"])):(0,s.kq)("",!0)]),(0,s._)("div",Ye,[(0,s.Wm)(d,{outline:"",label:"New Tag",class:"q-mr-sm",color:e.$q.dark.isActive?"grey-3":"grey-9",onClick:t[2]||(t[2]=e=>l.showNewClassInput=!0)},null,8,["color"]),(0,s.Wm)(d,{outline:"",label:l.showDeleteButtons?"Lock Tags":"Edit Tags",color:e.$q.dark.isActive?"grey-3":"grey-9",onClick:t[3]||(t[3]=e=>l.showDeleteButtons=!l.showDeleteButtons)},null,8,["label","color"])])])])}var Ge={name:"ClassesBlock",data(){return{showNewClassInput:!1,newClassName:"",showDeleteButtons:!1}},computed:{...(0,C.rn)(["classes","currentClass","enableKeyboardShortcuts"])},watch:{newClassName(e,t){e!=t&&(this.newClassName=e.toUpperCase())}},created(){document.addEventListener("keydown",this.keypress)},methods:{...(0,C.OI)(["setCurrentClass"]),...(0,C.nv)(["createNewClass","deleteClass"]),keypress(e){if(this.enableKeyboardShortcuts){var t=parseInt(e.key);t&&(t>this.classes.length||this.setCurrentClass(t-1))}},async handleRemoveClass(e,t){let n=await this.confirmAction(t);n&&this.deleteClass(e)},async confirmAction(e){return new Promise((t=>{const n=confirm("Are you sure you want to remove the tag `"+e+"`?\nNOTE: This will NOT affect previously tagged entities.");t(n)}))},saveNewClass(){if(!this.newClassName)return;const e=this;this.createNewClass(this.newClassName).then((()=>{e.showNewClassInput=!1,e.newClassName=""}))},onInputKeyup(e){"Enter"===e.key&&this.saveNewClass()}}},$e=n(1384);const Xe=(0,W.Z)(Ge,[["render",Je],["__scopeId","data-v-22a27cc0"]]);var et=Xe;T()(Ge,"components",{QChip:$e.Z,QAvatar:se.Z,QSpace:ie.Z,QInput:ue.Z,QBtn:V.Z});class tt{constructor(e){this.classes=e}setTokensAndAnnotation(e,t){if(this.tokens=e.map((e=>({type:"token",start:e[0],end:e[1],text:e[2]}))),this.words=e.map((e=>e[2])),void 0!=t)for(let l=0;l<t.entities.length;l++){var n=t.entities[l][0],o=t.entities[l][1],s=t.entities[l][2],a=this.classes.find((e=>e.name.toUpperCase()===s.toUpperCase()));a||(a={name:s}),this.addNewBlock(n,o,a)}}addNewBlock(e,t,n){let o=[],s=[],a=t<e?t:e,l=t>e?t:e;for(let r=0;r<this.tokens.length;r++){let e=this.tokens[r];if(e.end<a)s.push(e);else if(e.end>a&&e.start<l)if("token-block"==e.type)if(e.label.toUpperCase()==n.name.toUpperCase())o.push(...e.tokens);else{let t=[],r=[],i=e.tokens;for(let e=0;e<i.length;e++){let n=i[e];n.end<=a?t.push(n):n.end>a&&n.start<l?o.push(n):n.start>=l&&r.push(n)}t.length&&s.push({type:"token-block",start:t[0].start,end:t[t.length-1].end,tokens:t,label:e.label,classId:e.classId,backgroundColor:e.backgroundColor}),o.length&&r.length&&(s.push({type:"token-block",start:o[0].start,end:o[o.length-1].end,tokens:o,label:n&&n.name?n.name:"Unlabelled",classId:n&&n.id?n.id:0,backgroundColor:n&&n.color?n.color:null}),o=[]),r.length&&s.push({type:"token-block",start:r[0].start,end:r[r.length-1].end,tokens:r,label:e.label,classId:e.classId,backgroundColor:e.backgroundColor})}else"token"==e.type&&o.push(e);else e.start>=l&&o.length?(s.push({type:"token-block",start:o[0].start,end:o[o.length-1].end,tokens:o,label:n&&n.name?n.name:"Unlabelled",classId:n&&n.id?n.id:0,backgroundColor:n&&n.color?n.color:null}),o=[],s.push(e)):s.push(e)}o.length&&s.push({type:"token-block",start:o[0].start,end:o[o.length-1].end,tokens:o,label:n&&n.name?n.name:"Unlabelled",classId:n&&n.id?n.id:0,backgroundColor:n&&n.color?n.color:null}),this.tokens=s}removeBlock(e){let t=[];for(let n=0;n<this.tokens.length;n++)"token-block"===this.tokens[n].type&&this.tokens[n].start===e?t.push(...this.tokens[n].tokens):t.push(this.tokens[n]);this.tokens=t}resetBlocks(){let e=[];for(let t=0;t<this.tokens.length;t++)"token"===this.tokens[t].type?e.push(this.tokens[t]):e.push(...this.tokens[t].tokens);this.tokens=e}exportAsAnnotation(){let e=[];for(let t=0;t<this.tokens.length;t++)if("token-block"===this.tokens[t].type){let n=this.tokens[t];e.push([n.start,n.end,n.label])}return e}}var nt=tt,ot=n(459),st=n.n(ot),at={name:"AnnotationPage",components:{Token:Be,TokenBlock:He,ClassesBlock:et},data:function(){return{tm:new nt([]),currentSentence:{},redone:"",tokenizer:new(st())}},computed:{...(0,C.rn)(["annotations","classes","currentClass","currentIndex","inputSentences","enableKeyboardShortcuts","annotationPrecision"])},watch:{inputSentences(){this.resetIndex(),this.tokenizeCurrentSentence()},annotations(){this.currentAnnotation!=this.annotations[this.currentIndex]&&this.tokenizeCurrentSentence()},classes(){this.tokenizeCurrentSentence()},annotationPrecision(){this.tokenizeCurrentSentence()}},created(){this.inputSentences.length&&this.tokenizeCurrentSentence(),document.addEventListener("mouseup",this.selectTokens),document.addEventListener("keydown",this.keypress)},beforeUnmount(){document.removeEventListener("mouseup",this.selectTokens),document.removeEventListener("keydown",this.keypress)},methods:{...(0,C.OI)(["nextSentence","previousSentence","resetIndex"]),keypress(e){this.enableKeyboardShortcuts&&(32==e.keyCode?this.saveTags():39==e.keyCode?this.skipCurrentSentence():37==e.keyCode?this.backOneSentence():82!=e.keyCode&&27!=e.keyCode||this.resetBlocks(),e.stopPropagation())},tokenizeCurrentSentence(){let e,t;if(this.currentSentence=this.inputSentences[this.currentIndex],this.currentAnnotation=this.annotations[this.currentIndex],"char"==this.$store.state.annotationPrecision){e=this.currentSentence.text.split(""),t=[];for(let e=0;e<this.currentSentence.text.length;e++)t.push([e,e+1])}else e=this.tokenizer.tokenize(this.currentSentence.text),t=this.tokenizer.span_tokenize(this.currentSentence.text);let n=e.map(((e,n)=>[t[n][0],t[n][1],e]));this.tm=new nt(this.classes),this.tm.setTokensAndAnnotation(n,this.currentAnnotation)},selectTokens(){let e=document.getSelection();if(e.anchorOffset===e.focusOffset&&e.anchorNode===e.focusNode)return;const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);let o,s;try{o=parseInt(t.startContainer.parentElement.id.replace("t",""));let e=parseInt(n.endContainer.parentElement.id.replace("t",""));if(s=e+n.endOffset,!s){const t=n.endContainer.parentNode,o=t.previousSibling;e=parseInt(o.parentElement.id.replace("t","")),s=e+n.endOffset}}catch{return}if(!this.classes.length&&e.anchorNode)return alert("There are no Tags available. Kindly add some Tags before tagging."),void e.empty();this.tm.addNewBlock(o,s,this.currentClass),e.empty()},onRemoveBlock(e){this.tm.removeBlock(e)},resetBlocks(){this.tm.resetBlocks()},skipCurrentSentence(){this.nextSentence(),this.tokenizeCurrentSentence()},backOneSentence(){this.previousSentence(),this.tokenizeCurrentSentence()},saveTags(){this.$store.commit("addAnnotation",{text:this.currentSentence.text,entities:this.tm.exportAsAnnotation()}),this.nextSentence(),this.tokenizeCurrentSentence()}}};const lt=(0,W.Z)(at,[["render",Pe]]);var rt=lt;T()(at,"components",{QBtn:V.Z});const it={class:"px-3"};function ct(e,t,n,o,a,l){const r=(0,s.up)("split-type-selector"),i=(0,s.up)("annotation-precision-selector"),c=(0,s.up)("progress-bar"),u=(0,s.up)("keyboard-shortcuts");return(0,s.wg)(),(0,s.iD)("nav",it,[(0,s.Wm)(r,{class:"mt-4 mb-5"}),(0,s.Wm)(i,{class:"mt-4 mb-5"}),(0,s.Wm)(c,{class:"mb-5",completed:e.currentIndex,total:e.inputSentences.length},null,8,["completed","total"]),(0,s.Wm)(u)])}const ut={class:"q-mx-md"},dt={class:"is-size-6 q-mb-sm"};function pt(e,t,n,o,l,r){const i=(0,s.up)("q-linear-progress");return(0,s.wg)(),(0,s.iD)("div",ut,[(0,s._)("p",dt," Tagging Progress ("+(0,a.zw)(n.completed)+"/"+(0,a.zw)(n.total)+") ",1),(0,s.Wm)(i,{rounded:"",size:"md",color:"primary",value:n.completed/n.total},null,8,["value"])])}var mt={name:"ProgressBar",props:{completed:{type:Number,required:!0,default:0},total:{type:Number,required:!0}},computed:{completedPercent(){return parseInt(this.completed/this.total*100)}}},ht=n(6353);const gt=(0,W.Z)(mt,[["render",pt]]);var ft=gt;T()(mt,"components",{QLinearProgress:ht.Z});const kt={class:"q-pa-md"},wt={key:0,class:"q-px-md"};function yt(e,t,n,o,a,l){const r=(0,s.up)("q-select"),i=(0,s.up)("q-input");return(0,s.wg)(),(0,s.iD)("section",null,[(0,s._)("div",kt,[(0,s.Wm)(r,{modelValue:l.splitType,"onUpdate:modelValue":t[0]||(t[0]=e=>l.splitType=e),outlined:"","bg-color":e.$q.dark.isActive?"dark":"white",options:a.splitOptions,"map-options":!0,label:"Text Seperator"},null,8,["modelValue","bg-color","options"])]),"custom"===l.splitType?((0,s.wg)(),(0,s.iD)("div",wt,[(0,s.Wm)(i,{modelValue:a.customSeparator,"onUpdate:modelValue":t[1]||(t[1]=e=>a.customSeparator=e),label:"Separator","bg-color":"white",outlined:"",disabled:e.annotations.length,onChange:l.separatorChanged},null,8,["modelValue","disabled","onChange"])])):(0,s.kq)("",!0)])}var bt={name:"SpitTypeSelector",data(){return{customSeparator:"---",splitOptions:[{label:"New Line",value:"newline"},{label:"An Empty Line",value:"emptyline"},{label:"Custom String",value:"custom"}]}},computed:{...(0,C.rn)(["annotations"]),splitType:{get(){switch(this.$store.state.separator){case"\n":return"newline";case"\n\n":return"emptyline";default:return"custom"}},set(e){switch(e.value){case"newline":this.$store.commit("setSeparator","\n");break;case"emptyline":this.$store.commit("setSeparator","\n\n");break;default:this.$store.commit("setSeparator","---");break}}}},methods:{separatorChanged(){this.$store.commit("setSeparator",this.customSeparator)}}},vt=n(33);const Ct=(0,W.Z)(bt,[["render",yt]]);var xt=Ct;T()(bt,"components",{QSelect:vt.Z,QInput:ue.Z});const At={class:"q-px-md q-pb-md"};function St(e,t,n,o,a,l){const r=(0,s.up)("q-select");return(0,s.wg)(),(0,s.iD)("section",null,[(0,s._)("div",At,[(0,s.Wm)(r,{modelValue:l.precisionType,"onUpdate:modelValue":t[0]||(t[0]=e=>l.precisionType=e),outlined:"","bg-color":e.$q.dark.isActive?"dark":"white",options:a.precisionOptions,"map-options":!0,label:"Annotation Precision"},null,8,["modelValue","bg-color","options"])])])}var _t={name:"AnnotationPrecisionSelector",data(){return{precisionOptions:[{label:"Word Level",value:"word"},{label:"Character Level",value:"char"}]}},computed:{precisionType:{get(){switch(this.$store.state.annotationPrecision){case"word":return"word";case"char":return"char";default:return"word"}},set(e){switch(e.value){case"word":this.$store.commit("setAnnotationPrecision","word");break;case"char":this.$store.commit("setAnnotationPrecision","char");break;default:this.$store.commit("setAnnotationPrecision","word");break}}}}};const qt=(0,W.Z)(_t,[["render",St]]);var Wt=qt;T()(_t,"components",{QSelect:vt.Z});const Zt=(0,s._)("br",null,null,-1),Dt=(0,s._)("div",{class:"column"},[(0,s._)("div",{class:"row",style:{height:"40px"}},[(0,s._)("div",{class:"col-4"}," Num Keys: "),(0,s._)("div",{class:"col"}," Change classes ")]),(0,s._)("div",{class:"row",style:{height:"60px"}},[(0,s._)("div",{class:"col-4"}," Space Bar: "),(0,s._)("div",{class:"col"}," Save and move to the next sentence ")]),(0,s._)("div",{class:"row",style:{height:"60px"}},[(0,s._)("div",{class:"col-4"}," Right Arrow: "),(0,s._)("div",{class:"col"}," Skip and move to the next sentence ")]),(0,s._)("div",{class:"row",style:{height:"60px"}},[(0,s._)("div",{class:"col-4"}," Left Arrow: "),(0,s._)("div",{class:"col"}," Go back to the previous sentence ")]),(0,s._)("div",{class:"row",style:{height:"60px"}},[(0,s._)("div",{class:"col-4"}," Escape: "),(0,s._)("div",{class:"col"}," Discard changes to the current sentence ")])],-1);function It(e,t,n,o,a,l){const r=(0,s.up)("q-toggle"),i=(0,s.up)("q-icon"),c=(0,s.up)("q-card-section"),u=(0,s.up)("q-card"),d=(0,s.up)("q-dialog");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("section",null,[Zt,(0,s.Wm)(r,{modelValue:e.enableKeyboardShortcuts,"onUpdate:modelValue":t[0]||(t[0]=t=>e.enableKeyboardShortcuts=t),label:"Keyboard Shortcuts",onClick:l.enableKeyboardShortcutsChanged},null,8,["modelValue","onClick"]),(0,s.Wm)(i,{style:{"margin-left":"5px","margin-top":"3px"},color:e.$q.dark.isActive?"grey-4":"grey-10",name:"far fa-question-circle",onClick:t[1]||(t[1]=t=>e.showShortcutHelp=!0)},null,8,["color"])]),(0,s.Wm)(d,{"model-value":e.showShortcutHelp,onHide:t[2]||(t[2]=t=>e.showShortcutHelp=!1)},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{style:{"min-width":"100px",padding:"10px","border-radius":"10px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"text-body1"},{default:(0,s.w5)((()=>[Dt])),_:1})])),_:1})])),_:1},8,["model-value"])],64)}var Ut={name:"KeyboardShortcuts",data:function(){return{enableKeyboardShortcuts:!1,showShortcutHelp:!1}},methods:{enableKeyboardShortcutsChanged(){this.$store.commit("setKeyboardShortcuts",this.enableKeyboardShortcuts)}}},Tt=n(8299);const Pt=(0,W.Z)(Ut,[["render",It]]);var Et=Pt;T()(Ut,"components",{QToggle:Tt.Z,QIcon:ce.Z,QDialog:L.Z,QCard:H.Z,QCardSection:K.Z});var jt={name:"AnnotationSidebar",components:{ProgressBar:ft,SplitTypeSelector:xt,AnnotationPrecisionSelector:Wt,KeyboardShortcuts:Et},computed:{...(0,C.rn)(["currentIndex","inputSentences"])}};const Nt=(0,W.Z)(jt,[["render",ct]]);var Ot=Nt;const Bt={class:"fullscreen column justify-center bg-black",style:{opacity:"0.85"}},Qt={class:"column items-center"},Rt={class:"text-h2 text-white"},Ft=(0,s._)("p",{class:"text-h3 text-white"}," Drop file to upload. ",-1);function Lt(e,t){const n=(0,s.up)("q-icon");return(0,s.wg)(),(0,s.iD)("div",Bt,[(0,s._)("div",Qt,[(0,s._)("p",Rt,[(0,s.Wm)(n,{name:"fas fa-upload"})]),Ft])])}const Ht={},Kt=(0,W.Z)(Ht,[["render",Lt]]);var zt=Kt;T()(Ht,"components",{QIcon:ce.Z});var Vt={name:"LayoutDefault",components:{MenuBar:pe,StartPage:Ie,AnnotationPage:rt,AnnotationSidebar:Ot,DragNDropOverlay:zt,ExitDialog:te},setup(){const e=(0,j.Z)();return{notify(t,n,o){e.notify({icon:t,message:n,color:o,position:"top",timeout:2e3,actions:[{label:"Dismiss",color:"white"}]})}}},data(){return{currentPage:"start",overlayActive:!1,pendingFileDrop:null}},computed:{...(0,C.rn)(["annotations","classes"])},methods:{...(0,C.OI)(["loadClasses","loadAnnotations","setInputSentences","clearAllAnnotations","resetIndex"]),switchToPage(e){this.currentPage=e},onDragEnter(){this.overlayActive=!0},onDragLeave(){this.overlayActive=!1},onDrop(e){this.overlayActive=!1,this.pendingFileDrop=e.dataTransfer.files[0],"start"==this.currentPage&&this.processFileDrop()},processFileDrop(){let e=new FileReader;e.onload=e=>{let t=e.target.result;try{if("start"==this.currentPage)throw new Error("Not a text file.");this.loadAnnotations(JSON.parse(t)),this.notify("fa fa-check","Annotations imported successfully","positive")}catch(n){try{if("start"==this.currentPage)throw new Error("Not a text file.");this.loadClasses(JSON.parse(t)),this.notify("fa fa-check",`${this.classes.length} Tags imported successfully`,"positive")}catch(n){try{this.setInputSentences(t),this.clearAllAnnotations(),this.resetIndex(),this.switchToPage("annotate")}catch(n){this.notify("fas fa-exclamation-circle","Invalid file","red-6")}}}},e.readAsText(this.pendingFileDrop),this.pendingFileDrop=null}}},Mt=n(2446),Yt=n(2709),Jt=n(6974);const Gt=(0,W.Z)(Vt,[["render",l]]);var $t=Gt;T()(Vt,"components",{QLayout:Mt.Z,QDrawer:Yt.Z,QPageContainer:Jt.Z});n(2374);var Xt=n(853);const en=["red-11","blue-11","light-green-11","deep-orange-11","pink-11","light-blue-11","lime-11","brown-11","purple-11","cyan-11","yellow-11","grey-11","deep-purple-11","teal-11","amber-11","blue-grey-11","indigo-11","green-11","orange-11"],tn={setInputSentences(e,t){Array.isArray(t)||(e.originalText=t,t=t.split(e.separator)),e.inputSentences=t.map(((e,t)=>({id:t,text:e})))},addClass(e,t){let n=e.classes.find((e=>e.name==t));if(n)return;let o=e.classes.reduce(((e,t)=>t.id>e?t.id:e),0),s={id:o+1,name:t,color:en[o%en.length]};e.classes=[...e.classes,s],1===e.classes.length&&(e.currentClass=e.classes[0])},removeClass(e,t){e.classes=e.classes.filter((e=>e.id!=t)),e.currentClass.id===t&&(e.currentClass=e.classes[0])},setCurrentClass(e,t){e.currentClass=e.classes[t]},addAnnotation(e,t){e.annotations[e.currentIndex]=t,e.currentAnnotation=t},clearAllAnnotations(e){e.annotations=[],e.currentAnnotation={}},setSeparator(e,t){e.separator=t;const n=e.originalText.split(e.separator);e.inputSentences=n.map(((e,t)=>({id:t,text:e})))},setAnnotationPrecision(e,t){e.annotationPrecision=t},setKeyboardShortcuts(e,t){e.enableKeyboardShortcuts=t},nextSentence(e){e.currentIndex<e.inputSentences.length-1?(e.currentIndex+=1,e.currentAnnotation=e.annotations[e.currentIndex]||{}):alert("You have completed all the sentences")},previousSentence(e){e.currentIndex>0?(e.currentIndex-=1,e.currentAnnotation=e.annotations[e.currentIndex]):alert("You are at the beginning of all sentences")},resetIndex(e){e.currentIndex=0},loadClasses(e,t){if(!Array.isArray(t))throw new Error("loadClasses: payload must be an array");let n=t.reduce(((e,t)=>e&&"object"===typeof t&&"id"in t&&"name"in t&&"color"in t),!0);if(!n)throw new Error("loadClasses: payload has invalid schema");e.classes=t,e.currentClass=e.classes[0],Xt.Z.set("tags",e.classes)},loadAnnotations(e,t){let n="object"===typeof t&&"annotations"in t&&"classes"in t;if(!n)throw new Error("loadAnnotations: payload has invalid schema");let o=t.annotations;if(!Array.isArray(o))throw new Error("loadAnnotations: payload must be an array");let s=[];for(var a=0;a<o.length;a++){if(null==o[a])continue;let e={text:o[a][0],entities:o[a][1].entities};s[a]=e}e.annotations=s,e.currentAnnotation=e.annotations[e.currentIndex]}},nn={},on={createNewClass({commit:e,state:t},n){return new Promise(((o,s)=>{e("addClass",n);try{Xt.Z.set("tags",t.classes)}catch(a){s(a)}o()}))},deleteClass({commit:e,state:t},n){e("removeClass",n),Xt.Z.set("tags",t.classes)}};window.addEventListener("beforeunload",(async e=>{e.returnValue="Please make sure you export annotations before closing the file."}));var sn={state(){let e=Xt.Z.getItem("tags");return{annotations:[],classes:e||[],inputSentences:[],originalText:"",separator:"\n",enableKeyboardShortcuts:!1,annotationPrecision:"word",currentAnnotation:{},currentClass:e&&e[0]||{},currentIndex:0,currentSentence:""}},getters:nn,mutations:tn,actions:on},an=n(8029),ln=n(4525),rn=n.n(ln),cn=n(9797),un={config:{},plugins:{Notify:cn.Z},iconSet:rn()};const dn=(0,o.ri)($t).use(an.Z,un).use((0,C.MT)(sn));dn.mount("#app")}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,a){if(!o){var l=1/0;for(u=0;u<e.length;u++){o=e[u][0],s=e[u][1],a=e[u][2];for(var r=!0,i=0;i<o.length;i++)(!1&a||l>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(r=!1,a<l&&(l=a));if(r){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/ner-annotator/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,l=o[0],r=o[1],i=o[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(i)var u=i(n)}for(t&&t(o);c<l.length;c++)a=l[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},o=self["webpackChunkner_annotator"]=self["webpackChunkner_annotator"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3158)}));o=n.O(o)})();
//# sourceMappingURL=app.d5bdb45a.js.map